网络通信
浏览器内部生成消息
    - 生成http请求消息(请求行、消息头、消息体)；得到http响应消息(状态行、消息头、消息体)；
    - Get、Post、Put、Delete
向DNS服务器查询web服务器的IP地址
    - IP
      - TCP/IP网络是由小的子网通过路由器连接起来的；子网相当于一片区域内的网络号，IP地址表示这个区域内某个特定地方的地址
    - 当一台计算机需要和另一台计算机通讯时，计算机需要根据 本机子网掩码和目标IP地址 计算出目标IP所在的网段，然后再根据 本机IP 和 本机的子网掩码 得出本机所在的网段。如果两个网段相同，那么两台计算机是局域网，然后则开始通信；如果不同，也就意味着目标IP是一个远程地址，这时候本机会把数据发送给默认网关，然后默认网关处理接下来的通信
    - DNS：由操作系统底层提供的Socket库向最近的DNS服务器查询某个域名的主机地址，在网址中输入时，会先向DNS服务器查询该域名表示的主机地址，然后将该地址存到内存中，操作系统会将该地址带着对于的http请求一同发送；DNS服务器的地址会自动设置，或者在本地网络设置中手动设置
    - DNS服务器是接力进行的，上级DNS 服务器保管着所有下级  DNS 服务器的信息，所以我们可以从根域开始一路往下顺藤摸瓜找到任意  一个域的DNS 服务器
    - DNS服务器存在缓存，这样可以加快查询效率，缓存是有有效期的
网络管道
    - 通过操作系统的Socket组件中的协议栈完成
      - 服务器先起来，创建套接字等待客户端连接
        - 调用socket
      - 客户端创建套接字
        - 调用socket
      - 将管道连接到服务器端的套接字上（连接阶段）
        - 调用connect
      - 收发数据（通信阶段）
        - 调用write、read
      - 断开管道并删除套接字（断开阶段）
        - 调用close
协议栈和网卡
    - 协议栈内部结构
      - TCP/UDP协议
      - IP
    - TCP协议的三次握手
    - IP和以太网
      - 网络包:
        - 头部：包含目的地地址等控制信息
        - 数据
      - ip协议
        - IP 协议根据目标地址判断下一个IP 转发设备的位置
      - 以太网协议
        - 子网中的以太网协议将包传输到下一个最近的转发设备(路由)
          - 这里通过ARP协议查询目标路由器的MAC地址
      - 以太网：以太网是一种为多台计算机能够彼此自由和廉价地相互通信而设计的通信技术，以太网信号的本质就是正负变化的电压
    - 网卡
      - 由IP模块传递给网卡的网络包是由一连串0 和1 组成的数字信息，网卡会将这些数字信息转换为电信号或光信号，并通过网线（或光纤）发送出去，然后这些信号就会到达集线器、路由器等转发设备，再由转发设备一步一步地送达接收方
        - 网卡的ROM 中保存着全世界唯一的MAC 地址，这是在生产网  卡时写入的
        - 网卡中保存的MAC 地址会由网卡驱动程序读取并分配给MAC  模块
        - 发往网卡的一般是0，1组成的数字信号，在网线中我们只能通过测量信号中电压和电流的变化还原出0和1两者比特的值(数据信号)，然后把时钟信号和数据信号叠加在一起还原出0，1组成的数字信号
        - 发送网络包：网卡的MAC模块生成通用信号，然后由PHY(MAU)模块转换成可以在网线中传输的格式，并通过汪先发送出去，同时MAU还会监控接收线路中有没有信号进来
        - 接收网络包：MAU模块接收信号将其转换为通用格式发送给MAC模块，MAC模块再将其转换为数字信息，期间会发生FCS校验，然后会判断一下MAC地址和自己是不是能够对应，最后放入缓冲区，网卡驱动被中断处理程序调用后，会从网卡的缓冲区中取出收到的包，并通过MAC 头部中的以太类型字段判断协议的类型，然后根据该类型匹配协议栈处理，协议栈会判断这个包应该交给哪个应用程序处理
        - 在协议栈中，IP模块处理完后会交给TCP模块进行处理，里面存储的IP信息端口信息等会帮助操作系统找到对应的应用程序
集线器、交换机和路由器
    - 网线：双绞线可以抑制噪声，如果我们将信号线缠绕在一起，信号线就变成了螺旋形，其中两根信号线中产生的噪声电流方向就会相反，从而使得噪声电流相互抵消，噪声就得到了抑制
    - 集线器：信号到达集线器之后，集线器会将信号发送给所有链接在它上面的线路，集线器现在已经渐渐不再使用
    - 交换机
      - 交换机的每个网线接口后面都是一块网卡，网线接口和后面电路部分加在一起称为一个端口，但是交换机的端口不具有MAC地址
      - 交换机拥有MAC地址表，通过这张表就能够判断出收到的包应该转发到哪个端口
      - MAC地址表的维护
        - 收到包时，将发送方MAC 地址以及其输入端口的号码写入  MAC 地址表中
        - 删除地址表中某条记录的操作，这是为了防止设备移动时产  生问题
      - 全双工模式
        - 使用集线器时，如果多台计算机同时发送信号，信号就会在集线器内  部混杂在一起，进而无法使用，这种现象称为碰撞，是以太网的一个重要  特征。不过，只要不用集线器，就不会发生碰撞
        - 交换机的全双工模式可以同时发送和接收信号
    - 路由器
      - 路由器的各个端口都具有MAC 地址和IP 地址
WireShark
发生丢包或者通信错误时，可以通过WireShark来查更加具体的网络包问题
网络分析工具——WireShark的使用(超详细)-CSDN博客
